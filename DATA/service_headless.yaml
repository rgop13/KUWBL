apiVersion: v1
kind: Service
metadata:
  name: ray-ku-junyoung-head
  namespace: p-ncai-wbl
  labels:
    app: ray-ku-junyoung-head
    ray-cluster: ray-ku-junyoung     # ← 헤드/워커와 동일하게 맞춤
  annotations:
    sidecar.istio.io/inject: "false"
spec:
  clusterIP: None                    # Headless (StatefulSet의 serviceName과 짝)
  publishNotReadyAddresses: true
  ipFamilyPolicy: SingleStack
  ipFamilies: [ IPv4 ]
  selector:
    app: ray-ku-junyoung-head        # ← STS template.labels와 동일
    ray-cluster: ray-ku-junyoung
  ports:
  - name: gcs
    port: 6379
    targetPort: 6379
  - name: dashboard                  # 포트포워딩/모니터링 용도
    port: 8265
    targetPort: 8265
  - name: client                     # (옵션) ray client
    port: 10001
    targetPort: 10001
  - name: serve                      # (옵션) Ray Serve HTTP
    port: 8000
    targetPort: 8000
